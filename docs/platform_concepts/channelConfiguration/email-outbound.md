---
title: Email channel configuration
sidebar_label: Email
---

Email is a communication channel through which the organization can interact with users and vice versa. It allows the organization to send campaigns, receive tickets, address support requests, gather feedback, respond to inquiries, or engage in general communication.

When users send an email to the designated email address, the support agents from the organisation will respond to the email accordingly. You can use email for two-way communication to chat with your users. For example, support@organization.com or sales@organization.com.

The following are the different protocols for sending emails:

1. SMTP
2. HTTP-based Email API
3. Connect with Microsoft (OAuth)

### Email SMTP

Simple Mail Transfer Protocol (SMTP) is a simple mechanism to send or receive emails from or to your mail server. Traditionally, the one-off emails that we send from our mailbox to another are generated by SMTP.

:::note
Use SMTP configuration when the purpose is to send 1:1 transactional/update email notifications through our [Notifications API](https://docs.yellow.ai/docs/platform_concepts/engagement/outbound/notification-engine) or [Workflow](https://docs.yellow.ai/docs/platform_concepts/engagement/flows_campaign) campaign, and not usually recommended for bulk promotional ones.
:::

### Web-based Email API

A web-based Email API is a mechanism to exchange emails via HTTP (Hypertext Transfer Protocol). It allows you to access the functionality of the email services such as sending and receiving emails, managing contacts and mailboxes, and performing other email-related tasks, within the applications or systems.

### Difference between SMTP and  Email API


|SMTP  | Email API |
|--|--|
| SMTP is a protocol used to transfer emails between servers. The brand’s own SMTP can be used for sending transactional, support, workflow-driven, or one-off emails. | Email API is a set of tools and functions provided by an email service provider to allow you to programmatically interact with their email services. |
|This mechanism is not recommended for sending bulk or promotional email campaigns.| This mechanism can be chosen when the use case is to send bulk emails for promotional goals. |


## Add sender email account 

You can add sender email acount either by configuring the SMTP of the brand’s professional sender email ID or by adding the web-based email API key to the platform. Upon successful configuration, the platform can send emails from the associated Email ID.

### Set up SMTP-based email account (Basic)

This setup allows our platform to send emails on behalf of the email domain. 

To set up SMTP server on the yellow.ai platform, follow these steps:

1. On the left navigation bar, click **Extensions**.

    ![](https://imgur.com/PIOvT6K.png)

2. Click **Channels** > **Messaging** > **Email**.

    ![](https://imgur.com/LTrbjIP.png)

3. Click **Add email**

    ![](https://imgur.com/Mqd2sQI.png)
	
4. In the *Add Email* section, select **Basic** to add the details of the Email sender.

Enter the following details:

* **Configuration objective**: Select the purpose of the current email account - Campaigns or Support ticketing. You can select both if needed.
  * **Campaigns** - You can choose this option to send the campaigns such as promotions, newsletters and updates, event invitations, and so on. You need to create a [email template](https://docs.yellow.ai/docs/platform_concepts/engagement/outbound/templates/email-template) to exceute a campaign. After creating a template, you need create a email campaign. For more information, click [here](https://docs.yellow.ai/docs/platform_concepts/engagement/outbound/outbound-campaigns/run-campaign#32-email-campaign).
  * **Support ticketing** - You can choose this option  to raise your queries so that agent can track inquiries effectively. Each email received from a user is considered as a ticket. This helps support teams manage and prioritize incoming requests. For more information, click [here](https://docs.yellow.ai/docs/platform_concepts/inbox/tickets/tickets_intro).
* **Email**: Enter the email address (sender ID) that you want to associate with the account. For example, support@organization.com.
* **Server**: Enter the host URL. The value will be unique for each mail server. For example, it will be `smtp.gmail.com` for the Gmail server and `smtp.office365.com` for the Outlook server. In some cases, like a private server, the value will be the IP address of the SMTP connector service.
* **Username**: Enter the same email address that you entered in the Email field. For shared accounts such as Microsoft, these could be different.
* **Password**: Enter the app password of the specified email address. To know how to generate and use an app password for each server, see [Google](https://support.google.com/accounts/answer/185833?hl=en) and [Microsoft](https://support.microsoft.com/en-us/account-billing/using-app-passwords-with-apps-that-don-t-support-two-step-verification-5896ed9b-4263-e681-128a-a6f2979a7944).

:::note
* You should enter the same input for the email ID and username.
* Some email servers like Gmail offers [safer alternatives](https://support.google.com/mail/answer/185833?hl=en) to expose the password. You can generate it and provide it while configuring SMTP.
* For more details on SMTP, reach out to your IT team.
:::

* **Port**: Select port **465** for Gmail and port **587** for Outlook when setting up the SMTP connection.

* **Security type**: Choose **SSL** for Outlook or **TLS** for Gmail when selecting the appropriate security type for the SMTP connection.

* Click **Save**.

   <img src="https://i.imgur.com/1BbJrgg.png" width="80%"/>
	
* Once the email account details are saved, forwarding address will be displayed.

 ![](https://imgur.com/igensXY.png)

Similarly, you can add multiple email accounts and choose your preferred sender ID when configuring an outbound campaign.

#### **Set forwarding address**

The forwarding address generated within the platform must be added to your email server's setup, be it Gmail, Outlook, or another email server.

###### Prerequisite

* Copy the forwarding address from the Email channel page

To configure a forwarding address, follow these steps:

1. Go to the [Gmail](https://mail.google.com/) account.

:::note
You can only forward messages to a single Gmail address, not an email group or alias.
:::

2. Click on **Settings** (top right) > **See all settings**.

    <img src="https://i.imgur.com/OD4o8QH.png" alt="drawing" width="40%"/>
      
3. Click **Forwarding and POP/IMAP** tab.

   ![](https://i.imgur.com/qgJ6QnT.png)
   
4. In the "Forwarding" section, click **Add a forwarding address**.

     ![](https://i.imgur.com/04jG8R9.png)
     
5. Paste the forwarding address that you have copied from the Email channel page and click **Next**.

    ![](https://i.imgur.com/Z0kI6r4.png)
    
6. Click **Proceed** > **Ok**.

    ![](https://i.imgur.com/UYTQq9Q.png) 
    
7. A confirmation link will be sent to the **Bot Messages** section of the Inbox module. Click the below highlighted link.

     ![](https://imgur.com/lz32RPo.png)
     
8. Click **Confirm**.

     ![](https://i.imgur.com/wYydn38.png)
     
* Once confirmed, the email ID you have added will forward emails to your designated forwarding address.

   ![](https://i.imgur.com/I8dkzfz.png)

#### Add email alias account

You can add email alias account, if already main account configured in chatbot for alias.

To add an email alias account, follow these steps:

1. On the left navigation bar, click **Extensions**.

    ![](https://imgur.com/PIOvT6K.png)

2. Click **Channels** > **Messaging** > **Email**.

    ![](https://imgur.com/LTrbjIP.png)

3. Click **Add email**

    ![](https://imgur.com/Mqd2sQI.png)

4. Choose the account type as **Configure account**.  

    ![](https://cdn.yellowmessenger.com/assets/yellow-docs/configureaccount.png)    

5. In the *Add Email* section, enter the following details: 

   <img src="https://imgur.com/0Feopoh.png" alt="drawing" width="80%"/>
* In the email field, enter the email address of the alias account.
* In the username field, enter the email address of the main account.
In the password field, enter the app password associated with the main account and click **Save**. 

### Set up SMTP-based email account (JSON)

You can also configure SMTP using the JSON code.

To configure an SMTP using JSON, follow these steps:

1. Click **Channels** > **Messaging** > **Email**.

    ![](https://imgur.com/LTrbjIP.png)

2. Click **Add email**

    ![](https://imgur.com/Mqd2sQI.png)

3. Select **Configure account**.  

    ![](https://cdn.yellowmessenger.com/assets/yellow-docs/configureaccount.png)
	
4. In the *Add email* section, select **Advanced** to add the SMTP details of the email address in the JSON code for which you want to send emails.

    <img src="https://imgur.com/QSeK2vf.png" alt="drawing" width="80%"/>

5. Copy the below JSON code, paste it in the *Advanced configuration* section, and click **Save**.

```js
{
    "serviceType": [
        "supportTicketing"
    ],
    "address": "customerservice@shopping.id",
    "outboundConfig": {
        "server": "outlook.office365.com",
        "port": 587,
        "username": "customerservice@shopping.id",
        "name": "Customer Service Shopping",
        "password": "abc",
        "securityType": "SSL",
        "useAdvanceConfiguration": true,
        "advanceConfiguration": {
            "service": "Outlook365",
            "auth": {
                "user": "customerservice@shopping.id",
                "pass": "abc"
            }
        }
    }
}
```

:::note
* To send mail on behalf of the client, the client should enable SMTP authentication.
* In cases where clients have disabled SMTP auth for security reasons, they can whitelist Yellow.ai’s IP and allow emails from that IP.
* For Yellow.ai to receive emails from the customers of the client, the client needs to configure a unique forwarding address provided by Yellow.ai after configuring an email on the Channels page.
:::

### Get your Outlook SMTP

To get Outlook SMTP, follow these steps in Outlook:

1. Navigate to the **File** menu.  
2. Click Info. Go to the **Account Settings** page.
3. On the Yellow.ai platform, look for the email address that you want to configure.  
4. Search for the **Outgoing server field**.  
   * You will see the SMTP that you want.   


### Get your Gmail SMTP

For emails to be sent from smtp.gmail.com, make sure you have followed these 2 steps:
1. Enable 2-Step Verification in your Google account. 
2. Go to https://security.google.com/settings/security/apppasswords. 
    
    a. Click **Select app** and choose Other (custom name) from the dropdown.   
    
    b. Click **Generate**.   
    
    c. You will receive a 16-digit code, this code should be used as a password in email configuration, and the user remains as your email.  


### Web-based email account (API)

Reach out to the [yellow.ai team](mailto:vishnu@yellow.ai) for setting up an email account. The process will cover domain/subdomain authentication and dedicated IP address procurement, among others.

### Setup Email channel with OAuth

You can configure your email account with Microsoft OAuth to establish a secure and seamless connection between your email service and the AI agent. This allows the agent to send and receive emails without storing passwords.

#### Generate credentials on azure portal

1. Log in to the [Microsoft Azure](https://portal.azure.com/) portal.

2. Go to **App registrations**.

   ![](https://cdn.yellowmessenger.com/assets/yellow-docs/app-registrations.png)

4. Select your registered application.

   ![](https://cdn.yellowmessenger.com/assets/yellow-docs/select-account.png)

5. In your registered application, copy **Client ID** and **Tenant ID**.

    ![](https://cdn.yellowmessenger.com/assets/yellow-docs/cleint-tenant.png)

6. Go to **Certificates & secrets** > **Client secrets** > copy the **Client secret ID**.

   ![](https://cdn.yellowmessenger.com/assets/yellow-docs/client-secrets.png)   

#### Configure Email channel with OAuth 

To connect an email account with OAuth, follow these steps:

1. On the left navigation bar, click **Extensions**.

    ![](https://imgur.com/PIOvT6K.png)

2. Click **Channels** > **Messaging** > **Email**.

    ![](https://imgur.com/LTrbjIP.png)

3. Click **Add email**

    ![](https://imgur.com/Mqd2sQI.png)

4. Select **Connect with Microsoft** as the account type.

    ![](https://cdn.yellowmessenger.com/assets/yellow-docs/emailchannel1.png)

5.  In the *Add Email* section, enter the following details: 
    * **Configuration objective**: Select the purpose of the current email account - Campaigns or Support ticketing. You can select both if needed.
    * **Email ID**: Enter the email address of the alias account.
    * **Client ID**: Paste the Client ID copied from [step 5 of Generate credentials on azure portal](#generate-credentials-on-azure-portal)
    * **Client secret**: Enter the copied secret ID key generated in Azure to authenticate your application.
    * **Tenant ID**: Paste the Tenant ID copied from [step 5 of Generate credentials on azure portal](#generate-credentials-on-azure-portal) where your application is registered.

    ![](https://cdn.yellowmessenger.com/assets/yellow-docs/microsoftchannel.png)

6. Click **Connect**.    
	
## Test your bot on Email

After connecting your bot to an email account, you can test your bot using the following process.  

To test your bot on Email, follow these steps:

1. Go to your email account and send a mail to the customer support team. Enter the same mail address that you have configured in the STMP basic email section.

3. The ticket will be raised in the Inbox. Navigate to **Inbox** > **Tickets**. 

   ![](https://i.imgur.com/GX2OMiZ.png) 
   
4. The agent(customer support team) will send an email to your email address regarding your query.

     ![](https://i.imgur.com/6Y5FCkG.png)

## Email troubleshooting 
		 
### Troubleshooting email configuration

When configuring email, you might encounter the following issues:

* If you have entered a different email ID and username, the email channel will not be configured. 
* If you have entered an invalid password, the email channel will not be configured.

To troubleshoot, follow these steps:

1. On the Email channel page, **right-click > Inspect > Network**.

   ![](https://i.imgur.com/8WF5Mvd.png)
   
2. Select the "add_config" API and click **Preview** to view the error message.

     <img src="https://i.imgur.com/9JeysJA.png)" alt="drawing" width="60%"/> 
	 
Similarly, if you have entered an invalid password, you can follow the above steps to troubleshoot. 	 



## Generate app password for Email Tickets

Sometimes, emails from agents might not reach the end users. To solve this problem, we can use an app password. This helps make sure agents and users can communicate better.

**Prerequisites**

You'll need access to the same email account and password that's linked to the bot.

**Steps**

1. Log in to the email account linked to the bot.
2. Use the link below to make the app password: [App Password Creation Guide](https://support.google.com/accounts/answer/185833?hl=en)
3. Make the app name, then you'll get a 16-character app password.
4. Remove any spaces from the password and copy it.
5. Paste this password into the email settings.